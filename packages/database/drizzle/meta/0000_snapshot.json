{
  "id": "3db361ee-3b86-408c-b2d9-c19b81eabc56",
  "prevId": "00000000-0000-0000-0000-000000000000",
  "version": "7",
  "dialect": "postgresql",
  "tables": {
    "public.audit_logs": {
      "name": "audit_logs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "account_id": {
          "name": "account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "action": {
          "name": "action",
          "type": "text",
          "primaryKey": false,
          "notNull": true
        },
        "details": {
          "name": "details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "success": {
          "name": "success",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "error_message": {
          "name": "error_message",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_audit_logs_user_id": {
          "name": "idx_audit_logs_user_id",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_logs_account_id": {
          "name": "idx_audit_logs_account_id",
          "columns": [
            {
              "expression": "account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_logs_action": {
          "name": "idx_audit_logs_action",
          "columns": [
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_logs_created_at": {
          "name": "idx_audit_logs_created_at",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_audit_logs_user_action": {
          "name": "idx_audit_logs_user_action",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "action",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.daily_snapshots": {
      "name": "daily_snapshots",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "account_id": {
          "name": "account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "snapshot_date": {
          "name": "snapshot_date",
          "type": "date",
          "primaryKey": false,
          "notNull": true
        },
        "starting_balance": {
          "name": "starting_balance",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "ending_balance": {
          "name": "ending_balance",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "peak_balance": {
          "name": "peak_balance",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "daily_pnl": {
          "name": "daily_pnl",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "daily_pnl_pct": {
          "name": "daily_pnl_pct",
          "type": "numeric(8, 4)",
          "primaryKey": false,
          "notNull": true
        },
        "max_daily_drawdown": {
          "name": "max_daily_drawdown",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "max_total_drawdown": {
          "name": "max_total_drawdown",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "trades_count": {
          "name": "trades_count",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "winning_trades": {
          "name": "winning_trades",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "losing_trades": {
          "name": "losing_trades",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "volume": {
          "name": "volume",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_snapshots_account_date": {
          "name": "idx_snapshots_account_date",
          "columns": [
            {
              "expression": "account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "snapshot_date",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "daily_snapshots_account_id_trading_accounts_id_fk": {
          "name": "daily_snapshots_account_id_trading_accounts_id_fk",
          "tableFrom": "daily_snapshots",
          "tableTo": "trading_accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_daily_snapshot": {
          "name": "unique_daily_snapshot",
          "nullsNotDistinct": false,
          "columns": [
            "account_id",
            "snapshot_date"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.evaluation_plans": {
      "name": "evaluation_plans",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "name": {
          "name": "name",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": true
        },
        "slug": {
          "name": "slug",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "description": {
          "name": "description",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "evaluation_type": {
          "name": "evaluation_type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "account_tier": {
          "name": "account_tier",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'CLASSIC'"
        },
        "account_size": {
          "name": "account_size",
          "type": "numeric(18, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "evaluation_fee": {
          "name": "evaluation_fee",
          "type": "numeric(18, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "step1_profit_target_pct": {
          "name": "step1_profit_target_pct",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "step2_profit_target_pct": {
          "name": "step2_profit_target_pct",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false
        },
        "daily_loss_limit_pct": {
          "name": "daily_loss_limit_pct",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'5.00'"
        },
        "max_drawdown_pct": {
          "name": "max_drawdown_pct",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": true,
          "default": "'10.00'"
        },
        "trailing_drawdown": {
          "name": "trailing_drawdown",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "min_trading_days": {
          "name": "min_trading_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 5
        },
        "max_daily_trades": {
          "name": "max_daily_trades",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "min_trade_duration_seconds": {
          "name": "min_trade_duration_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 120
        },
        "btc_eth_max_leverage": {
          "name": "btc_eth_max_leverage",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 10
        },
        "altcoin_max_leverage": {
          "name": "altcoin_max_leverage",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 5
        },
        "profit_split_pct": {
          "name": "profit_split_pct",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 80
        },
        "max_profit_from_single_trade_pct": {
          "name": "max_profit_from_single_trade_pct",
          "type": "numeric(5, 2)",
          "primaryKey": false,
          "notNull": false,
          "default": "'50.00'"
        },
        "is_active": {
          "name": "is_active",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "display_order": {
          "name": "display_order",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_plans_active": {
          "name": "idx_plans_active",
          "columns": [
            {
              "expression": "is_active",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_plans_type": {
          "name": "idx_plans_type",
          "columns": [
            {
              "expression": "evaluation_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "evaluation_plans_slug_unique": {
          "name": "evaluation_plans_slug_unique",
          "nullsNotDistinct": false,
          "columns": [
            "slug"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "valid_evaluation_type": {
          "name": "valid_evaluation_type",
          "value": "\"evaluation_plans\".\"evaluation_type\" IN ('1-STEP', '2-STEP')"
        },
        "valid_account_tier": {
          "name": "valid_account_tier",
          "value": "\"evaluation_plans\".\"account_tier\" IN ('CLASSIC', 'ELITE', 'PRO')"
        },
        "positive_account_size": {
          "name": "positive_account_size",
          "value": "\"evaluation_plans\".\"account_size\" > 0"
        },
        "positive_evaluation_fee": {
          "name": "positive_evaluation_fee",
          "value": "\"evaluation_plans\".\"evaluation_fee\" > 0"
        },
        "valid_profit_split": {
          "name": "valid_profit_split",
          "value": "\"evaluation_plans\".\"profit_split_pct\" BETWEEN 0 AND 100"
        }
      },
      "isRLSEnabled": false
    },
    "public.users": {
      "name": "users",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "email": {
          "name": "email",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "email_verified_at": {
          "name": "email_verified_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "phone": {
          "name": "phone",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "phone_verified_at": {
          "name": "phone_verified_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "password_hash": {
          "name": "password_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "two_fa_secret": {
          "name": "two_fa_secret",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "two_fa_enabled": {
          "name": "two_fa_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": false
        },
        "username": {
          "name": "username",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "full_name": {
          "name": "full_name",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "country_code": {
          "name": "country_code",
          "type": "varchar(2)",
          "primaryKey": false,
          "notNull": false
        },
        "kyc_status": {
          "name": "kyc_status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'none'"
        },
        "kyc_submitted_at": {
          "name": "kyc_submitted_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "kyc_approved_at": {
          "name": "kyc_approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "kyc_documents": {
          "name": "kyc_documents",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'active'"
        },
        "role": {
          "name": "role",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'user'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "last_login_at": {
          "name": "last_login_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "last_login_ip": {
          "name": "last_login_ip",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_users_email": {
          "name": "idx_users_email",
          "columns": [
            {
              "expression": "email",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_status": {
          "name": "idx_users_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_users_username": {
          "name": "idx_users_username",
          "columns": [
            {
              "expression": "username",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "users_email_unique": {
          "name": "users_email_unique",
          "nullsNotDistinct": false,
          "columns": [
            "email"
          ]
        },
        "users_username_unique": {
          "name": "users_username_unique",
          "nullsNotDistinct": false,
          "columns": [
            "username"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "valid_email": {
          "name": "valid_email",
          "value": "\"users\".\"email\" ~* '^[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+.[A-Za-z]{2,}$'"
        },
        "valid_kyc_status": {
          "name": "valid_kyc_status",
          "value": "\"users\".\"kyc_status\" IN ('none', 'pending', 'approved', 'rejected')"
        },
        "valid_status": {
          "name": "valid_status",
          "value": "\"users\".\"status\" IN ('active', 'suspended', 'banned')"
        },
        "valid_role": {
          "name": "valid_role",
          "value": "\"users\".\"role\" IN ('user', 'admin', 'support')"
        }
      },
      "isRLSEnabled": false
    },
    "public.sessions": {
      "name": "sessions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "token_hash": {
          "name": "token_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "user_agent": {
          "name": "user_agent",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "ip_address": {
          "name": "ip_address",
          "type": "inet",
          "primaryKey": false,
          "notNull": false
        },
        "device_fingerprint": {
          "name": "device_fingerprint",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "last_active_at": {
          "name": "last_active_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "revoked_at": {
          "name": "revoked_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "revoke_reason": {
          "name": "revoke_reason",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_sessions_user": {
          "name": "idx_sessions_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_sessions_token": {
          "name": "idx_sessions_token",
          "columns": [
            {
              "expression": "token_hash",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_sessions_expires": {
          "name": "idx_sessions_expires",
          "columns": [
            {
              "expression": "expires_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "sessions_user_id_users_id_fk": {
          "name": "sessions_user_id_users_id_fk",
          "tableFrom": "sessions",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "sessions_token_hash_unique": {
          "name": "sessions_token_hash_unique",
          "nullsNotDistinct": false,
          "columns": [
            "token_hash"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    },
    "public.trading_accounts": {
      "name": "trading_accounts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "plan_id": {
          "name": "plan_id",
          "type": "integer",
          "primaryKey": false,
          "notNull": false
        },
        "account_type": {
          "name": "account_type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "account_number": {
          "name": "account_number",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "current_step": {
          "name": "current_step",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 1
        },
        "parent_account_id": {
          "name": "parent_account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "starting_balance": {
          "name": "starting_balance",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "current_balance": {
          "name": "current_balance",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "peak_balance": {
          "name": "peak_balance",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "total_margin_used": {
          "name": "total_margin_used",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "available_margin": {
          "name": "available_margin",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "daily_starting_balance": {
          "name": "daily_starting_balance",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "daily_pnl": {
          "name": "daily_pnl",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "daily_reset_at": {
          "name": "daily_reset_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "daily_loss_limit": {
          "name": "daily_loss_limit",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "max_drawdown_limit": {
          "name": "max_drawdown_limit",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "profit_target": {
          "name": "profit_target",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "current_profit": {
          "name": "current_profit",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "total_trades": {
          "name": "total_trades",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "winning_trades": {
          "name": "winning_trades",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "losing_trades": {
          "name": "losing_trades",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "total_volume": {
          "name": "total_volume",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "trading_days": {
          "name": "trading_days",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 0
        },
        "last_trade_at": {
          "name": "last_trade_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(30)",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending_payment'"
        },
        "breach_type": {
          "name": "breach_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "breach_reason": {
          "name": "breach_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "breached_at": {
          "name": "breached_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "step1_passed_at": {
          "name": "step1_passed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "passed_at": {
          "name": "passed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "updated_at": {
          "name": "updated_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_accounts_user": {
          "name": "idx_accounts_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_accounts_status": {
          "name": "idx_accounts_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_accounts_type": {
          "name": "idx_accounts_type",
          "columns": [
            {
              "expression": "account_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_accounts_number": {
          "name": "idx_accounts_number",
          "columns": [
            {
              "expression": "account_number",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "trading_accounts_user_id_users_id_fk": {
          "name": "trading_accounts_user_id_users_id_fk",
          "tableFrom": "trading_accounts",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        },
        "trading_accounts_plan_id_evaluation_plans_id_fk": {
          "name": "trading_accounts_plan_id_evaluation_plans_id_fk",
          "tableFrom": "trading_accounts",
          "tableTo": "evaluation_plans",
          "columnsFrom": [
            "plan_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "trading_accounts_account_number_unique": {
          "name": "trading_accounts_account_number_unique",
          "nullsNotDistinct": false,
          "columns": [
            "account_number"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "valid_account_type": {
          "name": "valid_account_type",
          "value": "\"trading_accounts\".\"account_type\" IN ('evaluation', 'funded')"
        },
        "valid_account_status": {
          "name": "valid_account_status",
          "value": "\"trading_accounts\".\"status\" IN ('pending_payment', 'active', 'step1_passed', 'passed', 'breached', 'expired', 'suspended')"
        },
        "valid_balance": {
          "name": "valid_balance",
          "value": "\"trading_accounts\".\"current_balance\"::numeric >= 0"
        },
        "valid_margin": {
          "name": "valid_margin",
          "value": "\"trading_accounts\".\"available_margin\"::numeric >= 0"
        }
      },
      "isRLSEnabled": false
    },
    "public.positions": {
      "name": "positions",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "account_id": {
          "name": "account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "symbol": {
          "name": "symbol",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "side": {
          "name": "side",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "leverage": {
          "name": "leverage",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "entry_price": {
          "name": "entry_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "entry_value": {
          "name": "entry_value",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "margin_used": {
          "name": "margin_used",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "entry_fee": {
          "name": "entry_fee",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "take_profit": {
          "name": "take_profit",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "stop_loss": {
          "name": "stop_loss",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "liquidation_price": {
          "name": "liquidation_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "current_price": {
          "name": "current_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "unrealized_pnl": {
          "name": "unrealized_pnl",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true,
          "default": "'0'"
        },
        "last_price_update": {
          "name": "last_price_update",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "opened_at": {
          "name": "opened_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "binance_price_at_entry": {
          "name": "binance_price_at_entry",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "price_source": {
          "name": "price_source",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'binance'"
        }
      },
      "indexes": {
        "idx_positions_account": {
          "name": "idx_positions_account",
          "columns": [
            {
              "expression": "account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_positions_symbol": {
          "name": "idx_positions_symbol",
          "columns": [
            {
              "expression": "symbol",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_positions_side": {
          "name": "idx_positions_side",
          "columns": [
            {
              "expression": "side",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "positions_account_id_trading_accounts_id_fk": {
          "name": "positions_account_id_trading_accounts_id_fk",
          "tableFrom": "positions",
          "tableTo": "trading_accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "cascade",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "valid_side": {
          "name": "valid_side",
          "value": "\"positions\".\"side\" IN ('LONG', 'SHORT')"
        },
        "valid_quantity": {
          "name": "valid_quantity",
          "value": "\"positions\".\"quantity\"::numeric > 0"
        },
        "valid_leverage": {
          "name": "valid_leverage",
          "value": "\"positions\".\"leverage\" >= 1"
        }
      },
      "isRLSEnabled": false
    },
    "public.trades": {
      "name": "trades",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "account_id": {
          "name": "account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "position_id": {
          "name": "position_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "symbol": {
          "name": "symbol",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "side": {
          "name": "side",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "leverage": {
          "name": "leverage",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "entry_price": {
          "name": "entry_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "entry_value": {
          "name": "entry_value",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "margin_used": {
          "name": "margin_used",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "entry_fee": {
          "name": "entry_fee",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "opened_at": {
          "name": "opened_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "exit_price": {
          "name": "exit_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "exit_value": {
          "name": "exit_value",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "exit_fee": {
          "name": "exit_fee",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "closed_at": {
          "name": "closed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "close_reason": {
          "name": "close_reason",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "gross_pnl": {
          "name": "gross_pnl",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "total_fees": {
          "name": "total_fees",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "net_pnl": {
          "name": "net_pnl",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "duration_seconds": {
          "name": "duration_seconds",
          "type": "integer",
          "primaryKey": false,
          "notNull": true
        },
        "binance_price_at_entry": {
          "name": "binance_price_at_entry",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "binance_price_at_exit": {
          "name": "binance_price_at_exit",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "take_profit_was": {
          "name": "take_profit_was",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "stop_loss_was": {
          "name": "stop_loss_was",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_trades_account": {
          "name": "idx_trades_account",
          "columns": [
            {
              "expression": "account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_trades_closed_at": {
          "name": "idx_trades_closed_at",
          "columns": [
            {
              "expression": "closed_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_trades_symbol": {
          "name": "idx_trades_symbol",
          "columns": [
            {
              "expression": "symbol",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_trades_position": {
          "name": "idx_trades_position",
          "columns": [
            {
              "expression": "position_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "trades_account_id_trading_accounts_id_fk": {
          "name": "trades_account_id_trading_accounts_id_fk",
          "tableFrom": "trades",
          "tableTo": "trading_accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "valid_trade_side": {
          "name": "valid_trade_side",
          "value": "\"trades\".\"side\" IN ('LONG', 'SHORT')"
        },
        "valid_close_reason": {
          "name": "valid_close_reason",
          "value": "\"trades\".\"close_reason\" IN ('MANUAL', 'TAKE_PROFIT', 'STOP_LOSS', 'LIQUIDATION', 'BREACH')"
        }
      },
      "isRLSEnabled": false
    },
    "public.orders": {
      "name": "orders",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "account_id": {
          "name": "account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "symbol": {
          "name": "symbol",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "side": {
          "name": "side",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "order_type": {
          "name": "order_type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "limit_price": {
          "name": "limit_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "take_profit": {
          "name": "take_profit",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "stop_loss": {
          "name": "stop_loss",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "filled_at": {
          "name": "filled_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "filled_price": {
          "name": "filled_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "position_id": {
          "name": "position_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "rejection_reason": {
          "name": "rejection_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_at": {
          "name": "rejected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "expires_at": {
          "name": "expires_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "client_order_id": {
          "name": "client_order_id",
          "type": "varchar(100)",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_orders_account": {
          "name": "idx_orders_account",
          "columns": [
            {
              "expression": "account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_status": {
          "name": "idx_orders_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_orders_client": {
          "name": "idx_orders_client",
          "columns": [
            {
              "expression": "client_order_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "orders_account_id_trading_accounts_id_fk": {
          "name": "orders_account_id_trading_accounts_id_fk",
          "tableFrom": "orders",
          "tableTo": "trading_accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "orders_position_id_positions_id_fk": {
          "name": "orders_position_id_positions_id_fk",
          "tableFrom": "orders",
          "tableTo": "positions",
          "columnsFrom": [
            "position_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "unique_client_order": {
          "name": "unique_client_order",
          "nullsNotDistinct": false,
          "columns": [
            "account_id",
            "client_order_id"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "valid_order_side": {
          "name": "valid_order_side",
          "value": "\"orders\".\"side\" IN ('LONG', 'SHORT')"
        },
        "valid_order_type": {
          "name": "valid_order_type",
          "value": "\"orders\".\"order_type\" IN ('MARKET', 'LIMIT')"
        },
        "valid_order_status": {
          "name": "valid_order_status",
          "value": "\"orders\".\"status\" IN ('pending', 'validating', 'executing', 'filled', 'rejected', 'cancelled', 'expired')"
        }
      },
      "isRLSEnabled": false
    },
    "public.trade_events": {
      "name": "trade_events",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "account_id": {
          "name": "account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "position_id": {
          "name": "position_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "trade_id": {
          "name": "trade_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "order_id": {
          "name": "order_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "event_type": {
          "name": "event_type",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "symbol": {
          "name": "symbol",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": false
        },
        "side": {
          "name": "side",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": false
        },
        "quantity": {
          "name": "quantity",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "price": {
          "name": "price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "details": {
          "name": "details",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "binance_price": {
          "name": "binance_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "price_timestamp": {
          "name": "price_timestamp",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "previous_event_hash": {
          "name": "previous_event_hash",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": false
        },
        "event_hash": {
          "name": "event_hash",
          "type": "varchar(64)",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_events_account": {
          "name": "idx_events_account",
          "columns": [
            {
              "expression": "account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_events_position": {
          "name": "idx_events_position",
          "columns": [
            {
              "expression": "position_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_events_type": {
          "name": "idx_events_type",
          "columns": [
            {
              "expression": "event_type",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_events_created": {
          "name": "idx_events_created",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "no_future_events": {
          "name": "no_future_events",
          "value": "\"trade_events\".\"created_at\" <= NOW()"
        },
        "valid_event_type": {
          "name": "valid_event_type",
          "value": "\"trade_events\".\"event_type\" IN (\n        'ORDER_PLACED', 'ORDER_VALIDATED', 'ORDER_REJECTED', 'ORDER_FILLED',\n        'POSITION_OPENED', 'POSITION_MODIFIED', 'POSITION_CLOSED',\n        'TP_SET', 'TP_MODIFIED', 'TP_TRIGGERED',\n        'SL_SET', 'SL_MODIFIED', 'SL_TRIGGERED',\n        'LIQUIDATION_WARNING', 'LIQUIDATION_TRIGGERED',\n        'DAILY_LOSS_WARNING', 'DAILY_LOSS_BREACH',\n        'DRAWDOWN_WARNING', 'DRAWDOWN_BREACH',\n        'BALANCE_UPDATE', 'MARGIN_UPDATE'\n      )"
        }
      },
      "isRLSEnabled": false
    },
    "public.payments": {
      "name": "payments",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "account_id": {
          "name": "account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "payment_type": {
          "name": "payment_type",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "amount": {
          "name": "amount",
          "type": "numeric(18, 2)",
          "primaryKey": false,
          "notNull": true
        },
        "currency": {
          "name": "currency",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true,
          "default": "'USD'"
        },
        "provider": {
          "name": "provider",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "provider_payment_id": {
          "name": "provider_payment_id",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "provider_data": {
          "name": "provider_data",
          "type": "jsonb",
          "primaryKey": false,
          "notNull": true,
          "default": "'{}'::jsonb"
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        },
        "completed_at": {
          "name": "completed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "refunded_at": {
          "name": "refunded_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "refund_reason": {
          "name": "refund_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        }
      },
      "indexes": {
        "idx_payments_user": {
          "name": "idx_payments_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_payments_status": {
          "name": "idx_payments_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_payments_provider": {
          "name": "idx_payments_provider",
          "columns": [
            {
              "expression": "provider_payment_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "payments_user_id_users_id_fk": {
          "name": "payments_user_id_users_id_fk",
          "tableFrom": "payments",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "payments_account_id_trading_accounts_id_fk": {
          "name": "payments_account_id_trading_accounts_id_fk",
          "tableFrom": "payments",
          "tableTo": "trading_accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "valid_payment_type": {
          "name": "valid_payment_type",
          "value": "\"payments\".\"payment_type\" IN ('evaluation_fee', 'addon', 'reset')"
        },
        "valid_payment_provider": {
          "name": "valid_payment_provider",
          "value": "\"payments\".\"provider\" IN ('stripe', 'coinbase', 'crypto_manual')"
        },
        "valid_payment_status": {
          "name": "valid_payment_status",
          "value": "\"payments\".\"status\" IN ('pending', 'processing', 'completed', 'failed', 'refunded')"
        }
      },
      "isRLSEnabled": false
    },
    "public.payouts": {
      "name": "payouts",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "uuid",
          "primaryKey": true,
          "notNull": true,
          "default": "gen_random_uuid()"
        },
        "user_id": {
          "name": "user_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "account_id": {
          "name": "account_id",
          "type": "uuid",
          "primaryKey": false,
          "notNull": true
        },
        "requested_amount": {
          "name": "requested_amount",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "platform_fee": {
          "name": "platform_fee",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "net_amount": {
          "name": "net_amount",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "payout_method": {
          "name": "payout_method",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "destination_address": {
          "name": "destination_address",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": true
        },
        "destination_network": {
          "name": "destination_network",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": false
        },
        "status": {
          "name": "status",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'pending'"
        },
        "approved_by": {
          "name": "approved_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "approved_at": {
          "name": "approved_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "processed_at": {
          "name": "processed_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "tx_hash": {
          "name": "tx_hash",
          "type": "varchar(255)",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_by": {
          "name": "rejected_by",
          "type": "uuid",
          "primaryKey": false,
          "notNull": false
        },
        "rejected_at": {
          "name": "rejected_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": false
        },
        "rejection_reason": {
          "name": "rejection_reason",
          "type": "text",
          "primaryKey": false,
          "notNull": false
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_payouts_user": {
          "name": "idx_payouts_user",
          "columns": [
            {
              "expression": "user_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_payouts_status": {
          "name": "idx_payouts_status",
          "columns": [
            {
              "expression": "status",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_payouts_account": {
          "name": "idx_payouts_account",
          "columns": [
            {
              "expression": "account_id",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {
        "payouts_user_id_users_id_fk": {
          "name": "payouts_user_id_users_id_fk",
          "tableFrom": "payouts",
          "tableTo": "users",
          "columnsFrom": [
            "user_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "payouts_account_id_trading_accounts_id_fk": {
          "name": "payouts_account_id_trading_accounts_id_fk",
          "tableFrom": "payouts",
          "tableTo": "trading_accounts",
          "columnsFrom": [
            "account_id"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "payouts_approved_by_users_id_fk": {
          "name": "payouts_approved_by_users_id_fk",
          "tableFrom": "payouts",
          "tableTo": "users",
          "columnsFrom": [
            "approved_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        },
        "payouts_rejected_by_users_id_fk": {
          "name": "payouts_rejected_by_users_id_fk",
          "tableFrom": "payouts",
          "tableTo": "users",
          "columnsFrom": [
            "rejected_by"
          ],
          "columnsTo": [
            "id"
          ],
          "onDelete": "no action",
          "onUpdate": "no action"
        }
      },
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {
        "valid_payout_method": {
          "name": "valid_payout_method",
          "value": "\"payouts\".\"payout_method\" IN ('crypto_btc', 'crypto_usdt', 'crypto_eth', 'bank_wire')"
        },
        "valid_payout_status": {
          "name": "valid_payout_status",
          "value": "\"payouts\".\"status\" IN ('pending', 'approved', 'processing', 'completed', 'rejected')"
        }
      },
      "isRLSEnabled": false
    },
    "public.market_pairs": {
      "name": "market_pairs",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "serial",
          "primaryKey": true,
          "notNull": true
        },
        "symbol": {
          "name": "symbol",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "base_currency": {
          "name": "base_currency",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "quote_currency": {
          "name": "quote_currency",
          "type": "varchar(10)",
          "primaryKey": false,
          "notNull": true
        },
        "display_name": {
          "name": "display_name",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true
        },
        "is_enabled": {
          "name": "is_enabled",
          "type": "boolean",
          "primaryKey": false,
          "notNull": true,
          "default": true
        },
        "spread_bps": {
          "name": "spread_bps",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 5
        },
        "max_leverage": {
          "name": "max_leverage",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 10
        },
        "min_quantity": {
          "name": "min_quantity",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "max_quantity": {
          "name": "max_quantity",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "quantity_precision": {
          "name": "quantity_precision",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 8
        },
        "price_precision": {
          "name": "price_precision",
          "type": "integer",
          "primaryKey": false,
          "notNull": true,
          "default": 2
        },
        "category": {
          "name": "category",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'major'"
        },
        "volatility_tier": {
          "name": "volatility_tier",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true,
          "default": "'normal'"
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_pairs_symbol": {
          "name": "idx_pairs_symbol",
          "columns": [
            {
              "expression": "symbol",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_pairs_enabled": {
          "name": "idx_pairs_enabled",
          "columns": [
            {
              "expression": "is_enabled",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_pairs_category": {
          "name": "idx_pairs_category",
          "columns": [
            {
              "expression": "category",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {
        "market_pairs_symbol_unique": {
          "name": "market_pairs_symbol_unique",
          "nullsNotDistinct": false,
          "columns": [
            "symbol"
          ]
        }
      },
      "policies": {},
      "checkConstraints": {
        "valid_category": {
          "name": "valid_category",
          "value": "\"market_pairs\".\"category\" IN ('major', 'altcoin', 'defi', 'meme')"
        },
        "valid_volatility": {
          "name": "valid_volatility",
          "value": "\"market_pairs\".\"volatility_tier\" IN ('low', 'normal', 'high', 'extreme')"
        },
        "positive_spread": {
          "name": "positive_spread",
          "value": "\"market_pairs\".\"spread_bps\" >= 0"
        },
        "positive_leverage": {
          "name": "positive_leverage",
          "value": "\"market_pairs\".\"max_leverage\" >= 1"
        }
      },
      "isRLSEnabled": false
    },
    "public.price_snapshots": {
      "name": "price_snapshots",
      "schema": "",
      "columns": {
        "id": {
          "name": "id",
          "type": "bigserial",
          "primaryKey": true,
          "notNull": true
        },
        "symbol": {
          "name": "symbol",
          "type": "varchar(20)",
          "primaryKey": false,
          "notNull": true
        },
        "bid_price": {
          "name": "bid_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "ask_price": {
          "name": "ask_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "mid_price": {
          "name": "mid_price",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": true
        },
        "volume_24h": {
          "name": "volume_24h",
          "type": "numeric(18, 8)",
          "primaryKey": false,
          "notNull": false
        },
        "source": {
          "name": "source",
          "type": "varchar(50)",
          "primaryKey": false,
          "notNull": true,
          "default": "'binance'"
        },
        "timestamp": {
          "name": "timestamp",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true
        },
        "created_at": {
          "name": "created_at",
          "type": "timestamp with time zone",
          "primaryKey": false,
          "notNull": true,
          "default": "now()"
        }
      },
      "indexes": {
        "idx_prices_symbol_time": {
          "name": "idx_prices_symbol_time",
          "columns": [
            {
              "expression": "symbol",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            },
            {
              "expression": "timestamp",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        },
        "idx_prices_created": {
          "name": "idx_prices_created",
          "columns": [
            {
              "expression": "created_at",
              "isExpression": false,
              "asc": true,
              "nulls": "last"
            }
          ],
          "isUnique": false,
          "concurrently": false,
          "method": "btree",
          "with": {}
        }
      },
      "foreignKeys": {},
      "compositePrimaryKeys": {},
      "uniqueConstraints": {},
      "policies": {},
      "checkConstraints": {},
      "isRLSEnabled": false
    }
  },
  "enums": {},
  "schemas": {},
  "sequences": {},
  "roles": {},
  "policies": {},
  "views": {},
  "_meta": {
    "columns": {},
    "schemas": {},
    "tables": {}
  }
}